# docs 更新プロンプト（テンプレ）

## 目的
最新ZIPを根拠に、指定された docs を **参照齟齬なく** 更新する。
（spec_* が唯一の正。Thread Log / Decision Log との整合も確認する）

---

## 運用ルール（必ず遵守）
- 共有物の唯一の正：この依頼に添付された最新ZIP（作業開始点のZIP。作業中に参照点を動かさない）
- 仕様の唯一の正：`docs/spec_*.md` と `AGENTS.md`
- ZIPが添付されていない場合は推測せず、ZIP添付を依頼して作業を停止する。
- 作業完了後は make_release_zip.py で新しいZIPを作成し、それを次の共有の唯一の正として扱う。
- 推測禁止。不足があれば最後に質問（最大5つ）
- **更新対象ファイル以外は触らない**
- 置換は「行番号」だけに依存しない（ズレるので）。必ず **アンカー文字列**も併用する

---

## 入力（貼り付ける）
- 最新ZIP名（この依頼に添付されたZIP）：`<<<ここにZIPファイル名>>>`
- Branch：`<<<例: main>>>`
- Commit：`<<<例: 265cb5b>>>`

### 更新対象（必須）
- 対象ファイル：
  - `<<<docs/.../foo.md>>>`
  - `<<<docs/.../bar.md>>>`

### 変更指示（必須：変更ごとに1ブロック）
以下を変更数ぶん繰り返す：

#### Change-01
- File: `docs/.../foo.md`
- Intent（何を直すか1行）:
- Locate（見つけ方）:
  - Line hint（任意）：L120-L150 付近
  - Anchor before（必須）：`<<<直前にある一意な文字列>>>`
  - Anchor after（任意）：`<<<直後にある一意な文字列>>>`
- Action（どれか）:
  - Replace: `<<<置換したい現行テキスト>>>` → `<<<新テキスト>>>`
  - Insert after anchor: `<<<追記テキスト>>>`
  - Delete: `<<<削除したい範囲>>>`
- Constraints:
  - 例：見出し構造は維持、意味変更なし、表の列順は維持、など

（Change-02, 03...）

---

## 追加チェック（必須）
- `docs/decision_log.md` 末尾（直近10〜20件）に、今回の変更と矛盾する決定がないか確認
- Thread Log がある場合、今回の更新が「ログの主張」と矛盾しないか確認
- 仕様（spec_*）と実装がズレている場合：
  - 原則：**実装に合わせてspecを書く**（別途「修正検討」として Decision/Thread に残す）

---

## 出力（厳守）
- 更新後の **対象ファイル全文**を出力する（差分ではなく全文置換前提）
- 余計な解説は出さない（ファイル本文のみ）
- 変更した箇所は、最低限の範囲で反映（無関係な整形は禁止）